{"ast":null,"code":"import _slicedToArray from\"C:/Programming/github/Proj3/aggie-fangs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import loadingGif from\"../images/loading.gif\";import upimg1 from\"../images/up1.png\";import upimg2 from\"../images/up2.png\";import downimg1 from\"../images/down1.png\";import downimg2 from\"../images/down2.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dbAddress=localStorage.getItem(\"db-address\");//reviewAddress = \"http://localhost:3002/getReviews\";\nfunction FeedbackView(_ref){var company=_ref.company;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),reviewInfo=_useState2[0],setReviewInfo=_useState2[1];useEffect(function(){fetch(dbAddress+\"/getReviews\",{method:\"GET\"}).then(function(response){if(response.type==='opaque'||response.ok){response.json().then(function(revItems){setReviewInfo(revItems);});}}).catch(function(error){console.log(\"Error is: \",error);});},[]);function upVote(id){// console.log(\"upvote id: \", id)\nfetch(dbAddress+'/upVote/'+id,{method:\"GET\"}).then(function(response){if(response.type==='opaque'||response.ok){window.location.href=window.location.href;}}).catch(function(error){console.log(\"Error is: \",error);});}function downVote(id){// do something with the id of the review\n//console.log(\"*downvote id: \", id)\nfetch(dbAddress+'/downVote/'+id,{method:\"GET\"}).then(function(response){if(response.type==='opaque'||response.ok){window.location.href=window.location.href;}}).catch(function(error){console.log(\"Error is: \",error);});}if(reviewInfo==null){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:loadingGif,alt:\"wait until the page loads\"})});}else{var reviewList=new Array();var upImage=/*#__PURE__*/_jsx(\"img\",{src:upimg2,alt:\"upvote\",align:\"left\"});// if statement to change which up image to use based on whether the user has voted\nvar downImage=/*#__PURE__*/_jsx(\"img\",{src:downimg2,alt:\"upvote\",align:\"right\"});// if statement to change which down image to use\nvar thisCompany=localStorage.getItem(\"this-company\");/*the down vote and up votes dont display properly on some company pages */reviewInfo.map(function(singleReviewItem){reviewList.push(!thisCompany.localeCompare(singleReviewItem.title)?/*#__PURE__*/_jsxs(\"div\",{className:\"reviewBox\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Name: \",singleReviewItem.name,\" / \",singleReviewItem.title]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Tags: \"}),/*#__PURE__*/_jsx(\"body\",{children:singleReviewItem.description}),/*#__PURE__*/_jsxs(\"div\",{class:\"votes up\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){upVote(singleReviewItem.id);},children:upImage}),singleReviewItem.upVotes]}),/*#__PURE__*/_jsxs(\"div\",{class:\"votes down\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){downVote(singleReviewItem.id);},children:downImage}),singleReviewItem.downVotes]})]}):null);});return/*#__PURE__*/_jsx(\"div\",{children:reviewList});}}export default FeedbackView;","map":{"version":3,"sources":["C:/Programming/github/Proj3/aggie-fangs/src/components/FeedbackView.js"],"names":["React","useEffect","useState","loadingGif","upimg1","upimg2","downimg1","downimg2","dbAddress","localStorage","getItem","FeedbackView","company","reviewInfo","setReviewInfo","fetch","method","then","response","type","ok","json","revItems","catch","error","console","log","upVote","id","window","location","href","downVote","reviewList","Array","upImage","downImage","thisCompany","map","singleReviewItem","push","localeCompare","title","name","description","upVotes","downVotes"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport loadingGif from \"../images/loading.gif\";\r\nimport upimg1 from \"../images/up1.png\";\r\nimport upimg2 from \"../images/up2.png\";\r\nimport downimg1 from \"../images/down1.png\";\r\nimport downimg2 from \"../images/down2.png\";\r\n\r\nvar dbAddress = localStorage.getItem(\"db-address\");\r\n//reviewAddress = \"http://localhost:3002/getReviews\";\r\n\r\nfunction FeedbackView({company}){\r\n    const [reviewInfo, setReviewInfo] = useState(null);\r\n    useEffect(() => {\r\n        fetch(dbAddress + \"/getReviews\",{\r\n        method: \"GET\"\r\n      }).then(response => {\r\n       if (response.type === 'opaque' || response.ok) {\r\n           response.json().then(revItems => {\r\n           setReviewInfo(revItems)\r\n         });\r\n       } \r\n     }).catch(error => {\r\n       console.log(\"Error is: \", error)\r\n     });\r\n    },[]);\r\n\r\n    function upVote(id) {\r\n       // console.log(\"upvote id: \", id)\r\n            fetch(dbAddress + '/upVote/' + id,{\r\n            method: \"GET\"\r\n        }).then(response => {\r\n            if (response.type === 'opaque' || response.ok) {\r\n                window.location.href = window.location.href;\r\n            } \r\n        }).catch(error => {\r\n        console.log(\"Error is: \", error)\r\n        });\r\n        \r\n    }\r\n\r\n    function downVote(id) {\r\n        // do something with the id of the review\r\n        //console.log(\"*downvote id: \", id)\r\n        fetch(dbAddress + '/downVote/' + id,{\r\n        method: \"GET\" \r\n        }).then(response => {\r\n            if (response.type === 'opaque' || response.ok) {\r\n                window.location.href = window.location.href;\r\n            } \r\n        }).catch(error => {\r\n            console.log(\"Error is: \", error)\r\n        });\r\n       \r\n    }\r\n\r\n\r\n    if(reviewInfo == null ){\r\n        return(\r\n            <div>\r\n                <img src={loadingGif} alt=\"wait until the page loads\"/>\r\n            </div>\r\n        )\r\n    } else {\r\n        var reviewList = new Array();\r\n        var upImage = <img src={upimg2} alt=\"upvote\" align=\"left\"/>\r\n        // if statement to change which up image to use based on whether the user has voted\r\n        var downImage = <img src={downimg2} alt=\"upvote\" align=\"right\"/>\r\n        // if statement to change which down image to use\r\n        var thisCompany = localStorage.getItem(\"this-company\");\r\n        /*the down vote and up votes dont display properly on some company pages */\r\n        reviewInfo.map( singleReviewItem => {\r\n            reviewList.push(\r\n                (!thisCompany.localeCompare(singleReviewItem.title)) ? \r\n                (<div className=\"reviewBox\">\r\n                    <h3>Name: {singleReviewItem.name} / {singleReviewItem.title}</h3>\r\n                    <h3>Tags: </h3>\r\n                    <body>\r\n                        {singleReviewItem.description}\r\n                    </body>\r\n                    <div class=\"votes up\">\r\n                        <a onClick={() => { upVote(singleReviewItem.id)}}>{upImage}</a>{singleReviewItem.upVotes}\r\n                    </div>\r\n                    <div class=\"votes down\">\r\n                        <a onClick={() => {downVote(singleReviewItem.id)}}>{downImage}</a>{singleReviewItem.downVotes}\r\n                    </div>\r\n                </div>)\r\n                : null\r\n            )\r\n        });\r\n        \r\n        return(\r\n            <div>\r\n                {reviewList}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default FeedbackView;"]},"metadata":{},"sourceType":"module"}